<div class="container waste-management-wrapper mt-4">
  <div class="card mb-4 report-card">
    <div class="card-header bg-primary text-white d-flex align-items-center">
      <i class="fas fa-recycle me-3"></i>
      <h3 class="mb-0">Add Waste Management Report</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="onSubmit(reportForm)" #reportForm="ngForm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="ward" class="form-label">
              <i class="fas fa-map-marker-alt me-2"></i>Select Ward
            </label>
            <select class="form-select" id="ward" [(ngModel)]="reportData.ward" name="ward" required>
              <option value="" disabled selected>Select a ward</option>
              <option *ngFor="let ward of wards" [value]="ward._id">
                {{ward.name}} ({{ward.wardNumber}})
              </option>
            </select>
          </div>
          <div class="col-md-6 mb-3">
            <label for="reportDate" class="form-label">
              <i class="fas fa-calendar-alt me-2"></i>Report Date
            </label>
            <input type="date" class="form-control" id="reportDate" 
                   [(ngModel)]="reportData.reportDate" name="reportDate" required>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="bioDegradable" class="form-label">
              <i class="fas fa-leaf me-2"></i>Bio Degradable Waste (%)
            </label>
            <div class="input-group">
              <input type="number" class="form-control" id="bioDegradable" 
                     [(ngModel)]="reportData.bioDegradable" name="bioDegradable" 
                     min="0" max="100" required>
              <span class="input-group-text">%</span>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="nonBioDegradable" class="form-label">
              <i class="fas fa-trash-alt me-2"></i>Non Bio Degradable Waste (%)
            </label>
            <div class="input-group">
              <input type="number" class="form-control" id="nonBioDegradable" 
                     [(ngModel)]="reportData.nonBioDegradable" name="nonBioDegradable" 
                     min="0" max="100" required>
              <span class="input-group-text">%</span>
            </div>
          </div>
        </div>

        <div class="mb-3">
          <label for="awareness" class="form-label">
            <i class="fas fa-bullhorn me-2"></i>Awareness Activities
          </label>
          <textarea class="form-control" id="awareness" rows="3" 
                    [(ngModel)]="reportData.awareness" name="awareness" required></textarea>
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="!reportForm.valid">
          <i class="fas fa-paper-plane me-2"></i>Submit Report
        </button>
      </form>
    </div>
  </div>

  <h3 class="mb-3 section-title">
    <i class="fas fa-list me-2"></i>Submitted Reports
  </h3>
  
  <div *ngIf="reports.length === 0" class="alert alert-info">
    <i class="fas fa-info-circle me-2"></i>No reports submitted yet.
  </div>

  <div class="row">
    <div *ngFor="let report of reports" class="col-md-6 mb-4">
      <div class="card h-100 report-detail-card">
        <div class="card-header bg-secondary text-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <i class="fas fa-map-marker-alt me-2"></i>
            {{getWardName(report.ward)}} - {{report.reportDate | date}}
          </h5>
          <span class="badge bg-light text-dark">
            <i class="fas fa-clock me-1"></i>
            {{report.createdAt | date:'shortTime'}}
          </span>
        </div>
        <div class="card-body">
          <div class="waste-breakdown">
            <div class="waste-chart">
              <div class="chart-item">
                <div class="chart-label">
                  <i class="fas fa-leaf text-success me-2"></i>
                  Bio Degradable
                </div>
                <div class="chart-bar">
                  <div class="bar bio-degradable" [style.width]="report.bioDegradable + '%'">
                    {{report.bioDegradable}}%
                  </div>
                </div>
              </div>
              <div class="chart-item">
                <div class="chart-label">
                  <i class="fas fa-trash-alt text-warning me-2"></i>
                  Non Bio Degradable
                </div>
                <div class="chart-bar">
                  <div class="bar non-bio-degradable" [style.width]="report.nonBioDegradable + '%'">
                    {{report.nonBioDegradable}}%
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="awareness-section mt-3">
            <h6 class="mb-2">
              <i class="fas fa-bullhorn me-2"></i>Awareness Activities
            </h6>
            <p class="text-muted">{{report.awareness}}</p>
          </div>
        </div>
        <div class="card-footer text-muted d-flex justify-content-between">
          <small>
            <i class="fas fa-calendar-check me-2"></i>
            Submitted on: {{report.createdAt | date:'medium'}}
          </small>
        </div>
      </div>
    </div>
  </div>
</div>